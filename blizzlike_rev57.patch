# HG changeset patch
# User asniker
# Date 1286805077 -21600
# Node ID e0e92da83160a1122e3f9a7f6d0276ccfaad8406
# Parent  d7f1dd88f8d1cb22119c6418b7e50fcddc8022d1
перевод телепортеров в цлк

diff --git a/src/server/game/Scripting/ScriptLoader.cpp b/src/server/game/Scripting/ScriptLoader.cpp
--- a/src/server/game/Scripting/ScriptLoader.cpp
+++ b/src/server/game/Scripting/ScriptLoader.cpp
@@ -466,7 +466,6 @@
 void AddSC_boss_festergut();
 void AddSC_boss_deathbringer_saurfang();
 void AddSC_boss_blood_queen_lanathel();
-void AddSC_icecrown_citadel_teleport();
 void AddSC_boss_gunship_battle();
 void AddSC_boss_baltharus();	//RubySanctum
 void AddSC_boss_halion();
@@ -1152,7 +1151,6 @@
     AddSC_boss_festergut();
     AddSC_boss_deathbringer_saurfang();
     AddSC_boss_blood_queen_lanathel();
-    AddSC_icecrown_citadel_teleport();
 	AddSC_boss_gunship_battle();
 	AddSC_boss_baltharus();	//RubySanctum
     AddSC_boss_halion();
diff --git a/src/server/scripts/Northrend/CMakeLists.txt b/src/server/scripts/Northrend/CMakeLists.txt
--- a/src/server/scripts/Northrend/CMakeLists.txt
+++ b/src/server/scripts/Northrend/CMakeLists.txt
@@ -163,7 +163,6 @@
      
 Northrend/IcecrownCitadel/icecrown_citadel.h
     
-Northrend/IcecrownCitadel/icecrown_citadel_teleport.cpp
 
 Northrend/IcecrownCitadel/instance_icecrown_citadel.cpp
 
diff --git a/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel.cpp b/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel.cpp
--- a/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel.cpp
+++ b/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel.cpp
@@ -42,24 +42,24 @@
         {
             if(InstanceScript* pInstance = pGO->GetInstanceScript())
             {
-                pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to Light's Hammer.", GOSSIP_SENDER_MAIN, HAMMER);
+                pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Молот света.", GOSSIP_SENDER_MAIN, HAMMER);
                 if(pInstance->GetData(DATA_MARROWGAR_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Oratory of the Damned.", GOSSIP_SENDER_MAIN, ORATORY);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Молельня проклятых.", GOSSIP_SENDER_MAIN, ORATORY);
                 if(pInstance->GetData(DATA_DEATHWHISPER_EVENT) == DONE)
                 {
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Rampart of Skulls.", GOSSIP_SENDER_MAIN, RAMPART);
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Deathbringer's Rise.", GOSSIP_SENDER_MAIN, SAURFANG);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Черепной вал.", GOSSIP_SENDER_MAIN, RAMPART);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Подъём смертоносного.", GOSSIP_SENDER_MAIN, SAURFANG);
                 }
                 if(pInstance->GetData(DATA_SAURFANG_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Upper Spire.", GOSSIP_SENDER_MAIN, UPPER_SPIRE);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Шпиль.", GOSSIP_SENDER_MAIN, UPPER_SPIRE);
                 if(pInstance->GetData(DATA_PROFESSOR_PUTRICIDE_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Plagueworks", GOSSIP_SENDER_MAIN, PLAGUEWORKS);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Чумодельня.", GOSSIP_SENDER_MAIN, PLAGUEWORKS);
                 if(pInstance->GetData(DATA_BLOOD_QUEEN_LANATHEL_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Crimson Halls", GOSSIP_SENDER_MAIN, CRIMSONHALL);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Багровый зал.", GOSSIP_SENDER_MAIN, CRIMSONHALL);
                 if(pInstance->GetData(DATA_VALITHRIA_DREAMWALKER_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Sindragosa's Lair", GOSSIP_SENDER_MAIN, QUEEN);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Логово Королевы Льда.", GOSSIP_SENDER_MAIN, QUEEN);
                 if(pInstance->GetData(DATA_SINDRAGOSA_EVENT) == DONE)
-                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Frostwing Halls", GOSSIP_SENDER_MAIN, FWHALLS);
+                    pPlayer->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Залы ледокрылых.", GOSSIP_SENDER_MAIN, FWHALLS);
             }
 
             pPlayer->SEND_GOSSIP_MENU(DEFAULT_GOSSIP_MESSAGE, pGO->GetGUID());
diff --git a/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel_teleport.cpp b/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel_teleport.cpp
deleted file mode 100644
--- a/src/server/scripts/Northrend/IcecrownCitadel/icecrown_citadel_teleport.cpp
+++ /dev/null
@@ -1,88 +0,0 @@
-/*
- * Copyright (C) 2008-2010 Trinity <http://www.trinitycore.org/>
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#include "ScriptPCH.h"
-#include "icecrown_citadel.h"
-#include "Spell.h"
-
-enum eSpellAction
-{
-    LIGHT_S_HAMMER_TELEPORT         = 70781,
-    ORATORY_OF_THE_DAMNED_TELEPORT  = 70856,
-    RAMPART_OF_SKULLS_TELEPORT      = 70857,
-    DEATHBRINGER_S_RISE_TELEPORT    = 70858,
-    UPPER_SPIRE_TELEPORT            = 70859,
-    FROZEN_THRONE_TELEPORT          = 70860,
-    SINDRAGOSA_S_LAIR_TELEPORT      = 70861
-};
-
-#define GOSSIP_SENDER_ICC_PORT 631
-
-class icecrown_citadel_teleport : public GameObjectScript
-{
-    public:
-        icecrown_citadel_teleport() : GameObjectScript("icecrown_citadel_teleport") { }
-
-        bool OnGossipHello(Player* player, GameObject* go)
-        {
-            player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to Light's Hammer.", GOSSIP_SENDER_ICC_PORT, LIGHT_S_HAMMER_TELEPORT);
-            if (InstanceScript* pInstance = go->GetInstanceScript())
-            {
-                if (pInstance->GetBossState(DATA_LORD_MARROWGAR) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Oratory of the Damned.", GOSSIP_SENDER_ICC_PORT, ORATORY_OF_THE_DAMNED_TELEPORT);
-                if (pInstance->GetBossState(DATA_LADY_DEATHWHISPER) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Rampart of Skulls.", GOSSIP_SENDER_ICC_PORT, RAMPART_OF_SKULLS_TELEPORT);
-                if (pInstance->GetBossState(DATA_GUNSHIP_BATTLE_EVENT) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Deathbringer's Rise.", GOSSIP_SENDER_ICC_PORT, DEATHBRINGER_S_RISE_TELEPORT);
-                if (pInstance->GetBossState(DATA_DEATHBRINGER_SAURFANG) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Upper Spire.", GOSSIP_SENDER_ICC_PORT, UPPER_SPIRE_TELEPORT);
-                if (pInstance->GetBossState(DATA_VALITHRIA_DREAMWALKER) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to the Sindragosa's Lair", GOSSIP_SENDER_ICC_PORT, SINDRAGOSA_S_LAIR_TELEPORT);
-                if (pInstance->GetBossState(DATA_PROFESSOR_PUTRICIDE) == DONE && pInstance->GetBossState(DATA_BLOOD_QUEEN_LANATHEL) == DONE && pInstance->GetBossState(DATA_SINDRAGOSA) == DONE)
-                    player->ADD_GOSSIP_ITEM(GOSSIP_ICON_CHAT, "Teleport to The Frozen Throne", GOSSIP_SENDER_ICC_PORT, FROZEN_THRONE_TELEPORT);
-            }
-
-            player->SEND_GOSSIP_MENU(go->GetGOInfo()->GetGossipMenuId(), go->GetGUID());
-            return true;
-        }
-
-        bool OnGossipSelect(Player* player, GameObject* /*go*/, uint32 sender, uint32 action)
-        {
-            player->PlayerTalkClass->ClearMenus();
-            player->CLOSE_GOSSIP_MENU();
-            SpellEntry const* spell = sSpellStore.LookupEntry(action);
-            if (!spell)
-                return false;
-
-            if (player->isInCombat())
-            {
-                Spell::SendCastResult(player, spell, 0, SPELL_FAILED_AFFECTING_COMBAT);
-                return true;
-            }
-
-            if (sender == GOSSIP_SENDER_ICC_PORT)
-                player->CastSpell(player, spell, true);
-
-            return true;
-        }
-};
-
-void AddSC_icecrown_citadel_teleport()
-{
-    new icecrown_citadel_teleport();
-}
